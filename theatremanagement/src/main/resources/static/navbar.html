
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajaxcalling</title>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    
	 <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->

    <!-- icons -->
     <script src="https://kit.fontawesome.com/54e0ebeaef.js" crossorigin="anonymous"></script>
<script>
$(document).ready(function(){
    if(localStorage.getItem('firstname') !== ''){
		$("#username").empty();
	$("#username").append("<p>"+ localStorage.getItem('firstname')+"</p>");
   }else{
	//alert("erorr");
   }
 });
</script>


</head>

<body>

	<!-- <div class="bg-image ">
		<img src="images.jpg" alt="background-image " />
	</div>		 -->
	

    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
        <div class="container-fluid">
        <a class="navbar-brand text-info text-opacity-100 ml-auto" class="mx-auto" style="width: 400px;" style="font-weight:bold;"><img src="./images/12-cinema-ticket-template-of-black-realistic-movie-tickets-isolated-on-white-background-vecotr-illustrt-removebg-preview.png" width="40" height="40" class="rounded-pill">Movie Tickets</a>
          
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="#" class="mx-auto" style="width: 100px;">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="index.html" class="mx-auto" style="width: 100px;">Movie</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="theatre.html" class="mx-auto" style="width: 500px;" onclick="Theatre()">Theaters</a>
              </li>
              
              <!-- <li class="nav-item dropdown">
                <ul class="dropdown-menu">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" class="mx-auto"><span id="username"></span></a>
                
                  <li><a class="dropdown-item" href="#" id="but_submit">logout</a></li>
                  
                </ul>
              </li> -->




              <div class="dropdown">
                <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">
                    <span id="username"></span>
                </button>
                <ul class="dropdown-menu" class="mx-auto" style="width: 500px;">
                  <li><a class="dropdown-item" href="#" id="but_submit">logout</a></li>
                
                </ul>
              </div>





            </ul>
          </div>
        </div>
      </nav>

		<div class="container  min-vh-10 py-4  mt-5">
            <div class="row">
                <div class="col-md-5 mx-auto">
                    <div class="input-group">
                        <input class="form-control border-end-0 border rounded-pill" type="search" value="search" id="example-search-input" onkeyup="searchCinema()">

                        <span class="input-group-append">        
                       </span>
                    </div>
                </div>
            </div>
        </div>


	

        <div class="container mt-5">	
            <div class="row row-cols-1 row-cols-md-3 g-4" id="mydd1" >
            
             <div class="d-grid gap-2 d-md-flex justify-content-md-end">
             </div>
          </div>
             </div>

<script>

$(document).ready(function(){
        $("#but_submit").click(function(){

			localStorage.removeItem('lastname',"");
	localStorage.removeItem('email',"");
	localStorage.removeItem('number',"");
	localStorage.removeItem('role',"");
	localStorage.removeItem('user',"");
	localStorage.removeItem('firstname',"");
	localStorage.removeItem('lastname',"");
	location.replace("/")

		});
    });
	


    function searchCinema(){

        var is_Data3="";

        

        $.ajax({
                dataTypa: "JSON",
                url: "http://localhost:8080/Theatre/searchbytheatrename?theatrename="+$ ("#example-search-input").val(),
             
                type:"GET",
               
              success: function (responseText) {
                $("#mydd").empty();

                $.each(responseText, function (index, item ) {
            
                    is_Data3 = is_Data3 + '<div class="card" style="width: 14rem; "><img src="'+item.poster+'" class="card-img-top" style="width: 200px; height: 300px; alt="..."><div class="card-body">' ;

            if(localStorage.getItem('role') == 'admin'){
                is_Data3 = is_Data3 +  '<button class="btn btn-outline-success me-md-4" style="padding-right:5%" type="button" id="edit" onclick ="edit('+item.id+')">EDIT</button><button class="btn btn-outline-warning"  style="padding-right:10%" type="button" id="DELETE" onclick ="deleteCinema('+item.id+')">DELETE</button>';
                     } else {
                        is_Data3 = is_Data3 +  '<button class="btn btn-outline-warning" type="button" id="BOOKING">BOOKING</button>'; 
                     }
                     is_Data3 = is_Data3 + '</div></div>';
             });
             $("#mydd1").empty();
                  $("#mydd1").append(is_Data);

              }
            });



    }




</script>
</body>
</html>