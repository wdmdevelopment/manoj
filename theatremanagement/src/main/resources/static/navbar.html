<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theatre</title>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

 
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script> -->

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- icons -->
     <script src="https://kit.fontawesome.com/54e0ebeaef.js" crossorigin="anonymous"></script>
<script>
$(document).ready(function(){
    if(localStorage.getItem('firstname') !== ''){
		$("#username").empty();
	$("#username").append("<p> HELLO "+ localStorage.getItem('firstname')+"</p>");
   }else{
	//alert("erorr");
   }
 });
</script>


</head>

<body>
<style>
    .dropdown-toggle::after {
            content: none;
        }
  </style>
	<!-- <div class="bg-image ">
		<img src="images.jpg" alt="background-image " />
	</div>		bg-info text-dark -->
	
  
    <nav class="navbar navbar-expand-sm  " style="background-color:#000080;">
        <div class="container-fluid">
        <a class="navbar-brand text-info text-opacity-100 ml-auto" class="mx-auto" style="width: 400px;" style="font-weight:bold;">
          <!-- <img src="./images/12-cinema-ticket-template-of-black-realistic-movie-tickets-isolated-on-white-background-vecotr-illustrt-removebg-preview.png" width="40" height="40" class="rounded-pill">  -->
          <font color="red" size="6.2%">WA</font><span style="font-size: 20.1px;"  class="text-white">VES</span></a>
          
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav">
              <!-- <li class="nav-item admin" style="display:none;">
                <a class="nav-link" href="#" class="mx-auto" style="width: 100px;">Home</a>
              </li> -->
              <li class="nav-item admin" style="display:none;">
                <a class="nav-link text-white" href="index.html" class="mx-auto" style="width: 100px;font-family: Times New Roman, Times, serif;">Movie</a>
              </li>
              <li class="nav-item admin" style="display:none;" id="theatreis">
                <a class="nav-link text-white" href="theatre.html" class="mx-auto" style="width: 500px; font-family: Times New Roman, Times, serif;" onclick="Theatre()">Theaters</a>
              </li>

              <li class="nav-item user text-white" style="display:none;">
                <a class="nav-link text-white" href="myorder.html" class="mx-auto" style="width: 500px;  font-family: Times New Roman, Times, serif;">MYBOOKING</a>
              </li>
              
             
              <li class="nav-item dropdown text-white">
                <a class="nav-link dropdown-toggle text-white" href="#" id="username" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="font-family: Times New Roman, Times, serif;">
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item " href="#" id="but_submit">logout</a>
                </div>
              </li>

            </ul>
              <!-- <div class="container-fluid">
                <form class="d-flex">
                  <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                </form> -->
              <!-- <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                  <span id="username"></span>
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#" id="but_submit">logout</a></li>
                </ul>
              </div> -->

           
          </div>
        </div>
        </div>
      </nav>
      
<!-- 
		<div class="container  min-vh-10 py-4  mt-5">
            <div class="row">
                <div class="col-md-12 mx-auto">
                    <div class="input-group">
                        <input  class="form-control border-end-0 border rounded-pill theatreshow " type="search"    id="example-search" onkeyup="searchCinema()" placeholder="Search movie...">

                        <span class="input-group-append">        
                       </span>
                    </div>
                </div>
            </div>
        </div> -->
    
    
	

        <div class="container mt-5">	
            <div class="row row-cols-1 row-cols-md-3 g-4" id="mydd1" >
            
             <!-- <div class="d-grid gap-2 d-md-flex justify-content-md-end">
             </div> -->
          </div>
             </div>

<script>

              // dropdown work
let dds = document.querySelectorAll('.dropdown-toggle')
dds.forEach((dd)=>{
    dd.addEventListener('click', function (e) {
        var el = this.nextElementSibling
        el.style.display = el.style.display==='block'?'none':'block'
    })
})
            // dropdown


if(localStorage.getItem("role")==="admin"){

  $(".admin").attr("style", "display:block");
}

if(localStorage.getItem("role")==="user"){

$(".user").attr("style", "display:block");
}

// $(document).ready(function(){
//         $("#theatreis").click(function(){
//           $(".theatreshow").attr("style", "display:block");
// 		});
//     });


$(document).ready(function(){
        $("#but_submit").click(function(){

			localStorage.removeItem('lastname',"");
	localStorage.removeItem('email',"");
	localStorage.removeItem('number',"");
	localStorage.removeItem('role',"");
	localStorage.removeItem('user',"");
	localStorage.removeItem('firstname',"");
	localStorage.removeItem('lastname',"");
	location.replace("/")

		});
   // getCnema("");


    });
	


    function getCnema(searchText){
      var url = "";
      if(searchText !== ""){
        url = "http://localhost:8080/cinema/searchbycinemaname?movieName="+$ ("#example-search").val();
      } else {
        url = "http://localhost:8080/cinema";
      }


      $.ajax({
                dataTypa: "JSON",
                url: url,
             
                type:"GET",
               
              success: function (responseText) {
                var text="";
                $("#mydd1").empty();
               
                $.each(responseText, function (index, item ) {
            
                    text = text + '<div class="card" style="width: 14rem; "><img src="'+item.poster+'" class="card-img-top" style="width: 200px; height: 300px; alt="..."><div class="card-body">' ;

            if(localStorage.getItem('role') == 'admin'){
              text = text +  '<button class="btn btn-outline-success me-md-4" style="padding-right:5%" type="button" id="edit" onclick ="edit('+item.id+')">EDIT</button><button class="btn btn-outline-warning"  style="padding-right:10%" type="button" id="DELETE" onclick ="deleteCinema('+item.id+')">DELETE</button>';
                     } else {
                      text = text +  '<button class="btn btn-outline-warning" type="button" id="BOOKING">BOOKING</button>'; 
                     }
                     text = text + '</div></div>';
             });
                   $("#mydd1").empty();
                  $("#mydd1").append(text);

              }
            });
    }



    function searchCinema(){

        
      getCnema($ ("#example-search").val());
      

        // $.ajax({
        //         dataTypa: "JSON",
        //         url: "http://localhost:8080/cinema/searchbycinemaname?movieName="+$ ("#example-search").val(),
             
        //         type:"GET",
               
        //       success: function (responseText) {
        //         var text="";
        //         $("#mydd1").empty();
               
        //         $.each(responseText, function (index, item ) {
            
        //             text = text + '<div class="card" style="width: 14rem; "><img src="'+item.poster+'" class="card-img-top" style="width: 200px; height: 300px; alt="..."><div class="card-body">' ;

        //     if(localStorage.getItem('role') == 'admin'){
        //       text = text +  '<button class="btn btn-outline-success me-md-4" style="padding-right:5%" type="button" id="edit" onclick ="edit('+item.id+')">EDIT</button><button class="btn btn-outline-warning"  style="padding-right:10%" type="button" id="DELETE" onclick ="deleteCinema('+item.id+')">DELETE</button>';
        //              } else {
        //               text = text +  '<button class="btn btn-outline-warning" type="button" id="BOOKING">BOOKING</button>'; 
        //              }
        //              text = text + '</div></div>';
        //      });
        //            $("#mydd1").empty();
        //           $("#mydd1").append(text);

        //       }
        //     });



    }




</script>
</body>
</html>